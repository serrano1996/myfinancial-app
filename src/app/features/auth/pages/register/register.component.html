<div class="auth-container">
    <!-- Decorative Shapes -->
    <div class="bg-shape shape-1"></div>
    <div class="bg-shape shape-2"></div>

    <div class="auth-card">
        <div class="auth-header">
            <div class="brand-logo">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" fill="none">
                    <defs>
                        <linearGradient id="registerCoinGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#fef08a" />
                            <stop offset="100%" style="stop-color:#facc15" />
                        </linearGradient>
                        <linearGradient id="registerPiggyBodyGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#f472b6" />
                            <stop offset="100%" style="stop-color:#db2777" />
                        </linearGradient>
                        <linearGradient id="registerPiggySnoutGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#f9a8d4" />
                            <stop offset="100%" style="stop-color:#f472b6" />
                        </linearGradient>
                        <filter id="registerShadow" x="-20%" y="-20%" width="140%" height="140%">
                            <feDropShadow dx="0" dy="2" stdDeviation="2" flood-color="#000" flood-opacity="0.2" />
                        </filter>
                    </defs>

                    <!-- Coin -->
                    <g transform="translate(45, 10)">
                        <circle cx="15" cy="15" r="14" fill="url(#registerCoinGradient)" stroke="#eab308"
                            stroke-width="1" />
                        <circle cx="15" cy="15" r="10" fill="none" stroke="#eab308" stroke-width="1" opacity="0.5" />
                        <text x="15" y="20" font-family="Arial" font-weight="bold" font-size="12" fill="#d97706"
                            text-anchor="middle">$</text>
                    </g>

                    <!-- Piggy Bank Body -->
                    <g filter="url(#registerShadow)">
                        <!-- Main Body -->
                        <ellipse cx="50" cy="65" rx="35" ry="28" fill="url(#registerPiggyBodyGradient)" />

                        <!-- Legs -->
                        <path d="M35 85 L35 95 L45 95 L45 88 Z" fill="#db2777" />
                        <path d="M65 85 L65 95 L75 95 L75 88 Z" fill="#db2777" />

                        <!-- Ears -->
                        <path d="M30 50 Q 20 40 25 35 Q 35 35 40 45 Z" fill="url(#registerPiggySnoutGradient)" />
                        <path d="M70 50 Q 80 40 75 35 Q 65 35 60 45 Z" fill="url(#registerPiggySnoutGradient)" />

                        <!-- Snout -->
                        <ellipse cx="25" cy="68" rx="12" ry="10" fill="url(#registerPiggySnoutGradient)" />
                        <circle cx="20" cy="68" r="2" fill="#be185d" /> <!-- Nostril L -->
                        <circle cx="30" cy="68" r="2" fill="#be185d" /> <!-- Nostril R -->

                        <!-- Eye -->
                        <circle cx="35" cy="55" r="3" fill="#1f2937" />

                        <!-- Tail -->
                        <path d="M82 60 Q 90 55 92 62 Q 94 68 88 65" fill="none" stroke="#f472b6" stroke-width="3"
                            stroke-linecap="round" />
                    </g>
                </svg>
            </div>
            <h2>{{ 'AUTH.REGISTER.TITLE' | translate }}</h2>
            <p>{{ 'AUTH.REGISTER.SUBTITLE' | translate }}</p>
        </div>

        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
            <div *ngIf="errorMessage" class="alert error-message">
                {{ errorMessage }}
            </div>
            <div *ngIf="successMessage" class="alert success-message">
                {{ 'AUTH.REGISTER.SUCCESS' | translate }}
            </div>

            <div class="form-group">
                <label for="email">{{ 'AUTH.REGISTER.EMAIL_LABEL' | translate }}</label>
                <div class="input-wrapper">
                    <input id="email" type="email" formControlName="email" autocomplete="email"
                        placeholder="{{ 'AUTH.REGISTER.EMAIL_PLACEHOLDER' | translate }}">
                </div>
                <div class="field-error"
                    *ngIf="registerForm.get('email')?.touched && registerForm.get('email')?.errors?.['required']">
                    {{ 'AUTH.REGISTER.ERROR_REQUIRED' | translate }}
                </div>
            </div>

            <div class="form-group">
                <label for="password">{{ 'AUTH.REGISTER.PASSWORD_LABEL' | translate }}</label>
                <div class="input-wrapper">
                    <input id="password" type="password" formControlName="password" autocomplete="new-password"
                        placeholder="{{ 'AUTH.REGISTER.PASSWORD_PLACEHOLDER' | translate }}">
                </div>
                <div class="field-error"
                    *ngIf="registerForm.get('password')?.touched && registerForm.get('password')?.errors?.['minlength']">
                    {{ 'AUTH.REGISTER.ERROR_PASSWORD_LENGTH' | translate }}
                </div>
            </div>

            <div class="form-group">
                <label for="confirmPassword">{{ 'AUTH.REGISTER.CONFIRM_PASSWORD_LABEL' | translate }}</label>
                <div class="input-wrapper">
                    <input id="confirmPassword" type="password" formControlName="confirmPassword"
                        autocomplete="new-password"
                        placeholder="{{ 'AUTH.REGISTER.CONFIRM_PASSWORD_PLACEHOLDER' | translate }}">
                </div>
                <div class="field-error"
                    *ngIf="registerForm.errors?.['mismatch'] && (registerForm.get('confirmPassword')?.touched || registerForm.get('password')?.touched)">
                    {{ 'AUTH.REGISTER.ERROR_MATCH' | translate }}
                </div>
            </div>

            <button type="submit" class="btn-primary" [disabled]="loading || registerForm.invalid">
                <span *ngIf="!loading">{{ 'AUTH.REGISTER.SUBMIT' | translate }}</span>
                <span *ngIf="loading">{{ 'AUTH.REGISTER.LOADING' | translate }}</span>
            </button>

            <div class="auth-footer">
                <span>{{ 'AUTH.REGISTER.HAVE_ACCOUNT' | translate }}</span>
                <a routerLink="/login" class="link">{{ 'AUTH.REGISTER.SIGN_IN' | translate }}</a>
            </div>
        </form>
    </div>

    <!-- Success Modal -->
    <div class="modal-overlay" *ngIf="showSuccessModal">
        <div class="modal-card">
            <div class="modal-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                    <polyline points="22 4 12 14.01 9 11.01"></polyline>
                </svg>
            </div>
            <h3>{{ 'AUTH.REGISTER.MODAL_SUCCESS.TITLE' | translate }}</h3>
            <p>{{ 'AUTH.REGISTER.MODAL_SUCCESS.MESSAGE' | translate }}</p>
            <button class="btn-primary" (click)="closeModal()">
                {{ 'AUTH.REGISTER.MODAL_SUCCESS.BUTTON' | translate }}
            </button>
        </div>
    </div>
</div>